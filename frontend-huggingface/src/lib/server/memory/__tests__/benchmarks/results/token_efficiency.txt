============================= test session starts =============================
platform: node v20.18.1
test framework: vitest
timestamp: 2026-01-08T00:59:13.684Z
rootdir: /home/ilan/BricksLLM/frontend-huggingface/src/lib/server/memory/__tests__

collecting ... collected 13 items

test_token_efficiency::test_english_token_estimation PASSED (0ms) [texts_tested=4.000, accurate_estimates=4.000, accuracy_rate=100.000, avg_tokens=13.000] [  8%]
test_token_efficiency::test_hebrew_token_estimation PASSED (0ms) [hebrew_texts_tested=4.000, accurate_estimates=4.000, hebrew_accuracy_rate=100.000, avg_hebrew_tokens=12.000] [ 15%]
test_token_efficiency::test_bilingual_token_estimation PASSED (0ms) [mixed_texts_tested=4.000, avg_mixed_tokens=7.000, avg_text_length=22.000, tokens_per_char=0.330] [ 23%]
test_token_efficiency::test_memory_compression_ratio PASSED (0ms) [original_tokens=117.000, compressed_tokens=36.000, compression_ratio=3.250, tokens_saved=81.000, savings_percent=69.000] [ 31%]
test_token_efficiency::test_hebrew_compression_ratio PASSED (0ms) [hebrew_original_tokens=74.000, hebrew_compressed_tokens=30.000, hebrew_compression_ratio=2.470, hebrew_savings_percent=59.000] [ 38%]
test_token_efficiency::test_budget_allocation PASSED (1ms) [total_items=8.000, total_tokens=73.000, small_budget_items=8.000, small_budget_utilization=4.000, medium_budget_items=8.000, medium_budget_utilization=1.000, high_priority_preserved=1.000] [ 46%]
test_token_efficiency::test_hebrew_budget_allocation PASSED (0ms) [hebrew_items=5.000, hebrew_total_tokens=57.000, english_equivalent_tokens=41.000, hebrew_token_efficiency=0.720] [ 54%]
test_token_efficiency::test_deduplication_efficiency PASSED (1ms) [original_items=6.000, unique_items=4.000, duplicates_removed=2.000, original_tokens=35.000, deduplicated_tokens=25.000, tokens_saved=10.000, savings_percent=29.000] [ 62%]
test_token_efficiency::test_hebrew_deduplication PASSED (0ms) [hebrew_original_items=5.000, hebrew_unique_items=3.000, hebrew_duplicates_removed=2.000, hebrew_tokens_saved=12.000] [ 69%]
test_token_efficiency::test_multi_memory_summarization PASSED (0ms) [original_memories=5.000, original_tokens=58.000, summarized_tokens=25.000, compression_ratio=2.320, information_density=0.200, tokens_saved=33.000] [ 77%]
test_token_efficiency::test_hebrew_summarization PASSED (0ms) [hebrew_original_memories=4.000, hebrew_original_tokens=53.000, hebrew_summarized_tokens=24.000, hebrew_compression_ratio=2.210] [ 85%]
test_token_efficiency::test_optimal_context_packing PASSED (0ms) [context_budget=8192.000, total_available_tokens=57.000, used_tokens=57.000, utilization_percent=1.000, wasted_tokens=8135.000, items_packed=8.000] [ 92%]
test_token_efficiency::test_token_efficiency PASSED (0ms) [english_tokens=19.000, hebrew_tokens=30.000, verbose_tokens=34.000, compressed_tokens=8.000, compression_ratio=4.250, hebrew_vs_english_ratio=1.580, fits_in_budget=1.000, total_efficiency_score=131.000] [100%]

============================== benchmark summary ==============================

Metrics Summary:
  texts_tested: avg=4.000, min=4.000, max=4.000
  accurate_estimates: avg=4.000, min=4.000, max=4.000
  accuracy_rate: avg=100.000, min=100.000, max=100.000
  avg_tokens: avg=13.000, min=13.000, max=13.000
  hebrew_texts_tested: avg=4.000, min=4.000, max=4.000
  hebrew_accuracy_rate: avg=100.000, min=100.000, max=100.000
  avg_hebrew_tokens: avg=12.000, min=12.000, max=12.000
  mixed_texts_tested: avg=4.000, min=4.000, max=4.000
  avg_mixed_tokens: avg=7.000, min=7.000, max=7.000
  avg_text_length: avg=22.000, min=22.000, max=22.000
  tokens_per_char: avg=0.330, min=0.330, max=0.330
  original_tokens: avg=70.000, min=35.000, max=117.000
  compressed_tokens: avg=22.000, min=8.000, max=36.000
  compression_ratio: avg=3.273, min=2.320, max=4.250
  tokens_saved: avg=41.333, min=10.000, max=81.000
  savings_percent: avg=49.000, min=29.000, max=69.000
  hebrew_original_tokens: avg=63.500, min=53.000, max=74.000
  hebrew_compressed_tokens: avg=30.000, min=30.000, max=30.000
  hebrew_compression_ratio: avg=2.340, min=2.210, max=2.470
  hebrew_savings_percent: avg=59.000, min=59.000, max=59.000
  total_items: avg=8.000, min=8.000, max=8.000
  total_tokens: avg=73.000, min=73.000, max=73.000
  small_budget_items: avg=8.000, min=8.000, max=8.000
  small_budget_utilization: avg=4.000, min=4.000, max=4.000
  medium_budget_items: avg=8.000, min=8.000, max=8.000
  medium_budget_utilization: avg=1.000, min=1.000, max=1.000
  high_priority_preserved: avg=1.000, min=1.000, max=1.000
  hebrew_items: avg=5.000, min=5.000, max=5.000
  hebrew_total_tokens: avg=57.000, min=57.000, max=57.000
  english_equivalent_tokens: avg=41.000, min=41.000, max=41.000
  hebrew_token_efficiency: avg=0.720, min=0.720, max=0.720
  original_items: avg=6.000, min=6.000, max=6.000
  unique_items: avg=4.000, min=4.000, max=4.000
  duplicates_removed: avg=2.000, min=2.000, max=2.000
  deduplicated_tokens: avg=25.000, min=25.000, max=25.000
  hebrew_original_items: avg=5.000, min=5.000, max=5.000
  hebrew_unique_items: avg=3.000, min=3.000, max=3.000
  hebrew_duplicates_removed: avg=2.000, min=2.000, max=2.000
  hebrew_tokens_saved: avg=12.000, min=12.000, max=12.000
  original_memories: avg=5.000, min=5.000, max=5.000
  summarized_tokens: avg=25.000, min=25.000, max=25.000
  information_density: avg=0.200, min=0.200, max=0.200
  hebrew_original_memories: avg=4.000, min=4.000, max=4.000
  hebrew_summarized_tokens: avg=24.000, min=24.000, max=24.000
  context_budget: avg=8192.000, min=8192.000, max=8192.000
  total_available_tokens: avg=57.000, min=57.000, max=57.000
  used_tokens: avg=57.000, min=57.000, max=57.000
  utilization_percent: avg=1.000, min=1.000, max=1.000
  wasted_tokens: avg=8135.000, min=8135.000, max=8135.000
  items_packed: avg=8.000, min=8.000, max=8.000
  english_tokens: avg=19.000, min=19.000, max=19.000
  hebrew_tokens: avg=30.000, min=30.000, max=30.000
  verbose_tokens: avg=34.000, min=34.000, max=34.000
  hebrew_vs_english_ratio: avg=1.580, min=1.580, max=1.580
  fits_in_budget: avg=1.000, min=1.000, max=1.000
  total_efficiency_score: avg=131.000, min=131.000, max=131.000

============================== test results ===================================
13 passed, 0 failed in 0.02s
===============================================================================